

local cmap = lunum.array{
   0.000000e+00 , 0.000000e+00 , 5.000000e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.156863e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.313725e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.470588e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.627451e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.784314e-01 ,
   0.000000e+00 , 0.000000e+00 , 5.941176e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.098039e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.254902e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.411765e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.568627e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.725490e-01 ,
   0.000000e+00 , 0.000000e+00 , 6.882353e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.039216e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.196078e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.352941e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.509804e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.666667e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.823529e-01 ,
   0.000000e+00 , 0.000000e+00 , 7.980392e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.137255e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.294118e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.450980e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.607843e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.764706e-01 ,
   0.000000e+00 , 0.000000e+00 , 8.921569e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.078431e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.235294e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.392157e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.549020e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.705882e-01 ,
   0.000000e+00 , 0.000000e+00 , 9.862745e-01 ,
   0.000000e+00 , 1.960784e-03 , 9.960938e-01 ,
   0.000000e+00 , 1.764706e-02 , 9.960938e-01 ,
   0.000000e+00 , 3.333333e-02 , 9.960938e-01 ,
   0.000000e+00 , 4.901961e-02 , 9.960938e-01 ,
   0.000000e+00 , 6.470588e-02 , 9.960938e-01 ,
   0.000000e+00 , 8.039216e-02 , 9.960938e-01 ,
   0.000000e+00 , 9.607843e-02 , 9.960938e-01 ,
   0.000000e+00 , 1.117647e-01 , 9.960938e-01 ,
   0.000000e+00 , 1.274510e-01 , 9.960938e-01 ,
   0.000000e+00 , 1.431373e-01 , 9.960938e-01 ,
   0.000000e+00 , 1.588235e-01 , 9.960938e-01 ,
   0.000000e+00 , 1.745098e-01 , 9.960938e-01 ,
   0.000000e+00 , 1.901961e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.058824e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.215686e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.372549e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.529412e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.686275e-01 , 9.960938e-01 ,
   0.000000e+00 , 2.843137e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.000000e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.156863e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.313725e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.470588e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.627451e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.784314e-01 , 9.960938e-01 ,
   0.000000e+00 , 3.941176e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.098039e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.254902e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.411765e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.568627e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.725490e-01 , 9.960938e-01 ,
   0.000000e+00 , 4.882353e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.039216e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.196078e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.352941e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.509804e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.666667e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.823529e-01 , 9.960938e-01 ,
   0.000000e+00 , 5.980392e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.137255e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.294118e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.450980e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.607843e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.764706e-01 , 9.960938e-01 ,
   0.000000e+00 , 6.921569e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.078431e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.235294e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.392157e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.549020e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.705882e-01 , 9.960938e-01 ,
   0.000000e+00 , 7.862745e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.019608e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.176471e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.333333e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.490196e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.647059e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.803922e-01 , 9.960938e-01 ,
   0.000000e+00 , 8.960784e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.117647e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.274510e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.431373e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.588235e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.745098e-01 , 9.960938e-01 ,
   0.000000e+00 , 9.901961e-01 , 9.960938e-01 ,
   5.882353e-03 , 9.941176e-01 , 9.941176e-01 ,
   2.156863e-02 , 9.784314e-01 , 9.784314e-01 ,
   3.725490e-02 , 9.627451e-01 , 9.627451e-01 ,
   5.294118e-02 , 9.470588e-01 , 9.470588e-01 ,
   6.862745e-02 , 9.313725e-01 , 9.313725e-01 ,
   8.431373e-02 , 9.156863e-01 , 9.156863e-01 ,
   1.000000e-01 , 9.000000e-01 , 9.000000e-01 ,
   1.156863e-01 , 8.843137e-01 , 8.843137e-01 ,
   1.313725e-01 , 8.686275e-01 , 8.686275e-01 ,
   1.470588e-01 , 8.529412e-01 , 8.529412e-01 ,
   1.627451e-01 , 8.372549e-01 , 8.372549e-01 ,
   1.784314e-01 , 8.215686e-01 , 8.215686e-01 ,
   1.941176e-01 , 8.058824e-01 , 8.058824e-01 ,
   2.098039e-01 , 7.901961e-01 , 7.901961e-01 ,
   2.254902e-01 , 7.745098e-01 , 7.745098e-01 ,
   2.411765e-01 , 7.588235e-01 , 7.588235e-01 ,
   2.568627e-01 , 7.431373e-01 , 7.431373e-01 ,
   2.725490e-01 , 7.274510e-01 , 7.274510e-01 ,
   2.882353e-01 , 7.117647e-01 , 7.117647e-01 ,
   3.039216e-01 , 6.960784e-01 , 6.960784e-01 ,
   3.196078e-01 , 6.803922e-01 , 6.803922e-01 ,
   3.352941e-01 , 6.647059e-01 , 6.647059e-01 ,
   3.509804e-01 , 6.490196e-01 , 6.490196e-01 ,
   3.666667e-01 , 6.333333e-01 , 6.333333e-01 ,
   3.823529e-01 , 6.176471e-01 , 6.176471e-01 ,
   3.980392e-01 , 6.019608e-01 , 6.019608e-01 ,
   4.137255e-01 , 5.862745e-01 , 5.862745e-01 ,
   4.294118e-01 , 5.705882e-01 , 5.705882e-01 ,
   4.450980e-01 , 5.549020e-01 , 5.549020e-01 ,
   4.607843e-01 , 5.392157e-01 , 5.392157e-01 ,
   4.764706e-01 , 5.235294e-01 , 5.235294e-01 ,
   4.921569e-01 , 5.078431e-01 , 5.078431e-01 ,
   5.078431e-01 , 5.078431e-01 , 4.921569e-01 ,
   5.235294e-01 , 5.235294e-01 , 4.764706e-01 ,
   5.392157e-01 , 5.392157e-01 , 4.607843e-01 ,
   5.549020e-01 , 5.549020e-01 , 4.450980e-01 ,
   5.705882e-01 , 5.705882e-01 , 4.294118e-01 ,
   5.862745e-01 , 5.862745e-01 , 4.137255e-01 ,
   6.019608e-01 , 6.019608e-01 , 3.980392e-01 ,
   6.176471e-01 , 6.176471e-01 , 3.823529e-01 ,
   6.333333e-01 , 6.333333e-01 , 3.666667e-01 ,
   6.490196e-01 , 6.490196e-01 , 3.509804e-01 ,
   6.647059e-01 , 6.647059e-01 , 3.352941e-01 ,
   6.803922e-01 , 6.803922e-01 , 3.196078e-01 ,
   6.960784e-01 , 6.960784e-01 , 3.039216e-01 ,
   7.117647e-01 , 7.117647e-01 , 2.882353e-01 ,
   7.274510e-01 , 7.274510e-01 , 2.725490e-01 ,
   7.431373e-01 , 7.431373e-01 , 2.568627e-01 ,
   7.588235e-01 , 7.588235e-01 , 2.411765e-01 ,
   7.745098e-01 , 7.745098e-01 , 2.254902e-01 ,
   7.901961e-01 , 7.901961e-01 , 2.098039e-01 ,
   8.058824e-01 , 8.058824e-01 , 1.941176e-01 ,
   8.215686e-01 , 8.215686e-01 , 1.784314e-01 ,
   8.372549e-01 , 8.372549e-01 , 1.627451e-01 ,
   8.529412e-01 , 8.529412e-01 , 1.470588e-01 ,
   8.686275e-01 , 8.686275e-01 , 1.313725e-01 ,
   8.843137e-01 , 8.843137e-01 , 1.156863e-01 ,
   9.000000e-01 , 9.000000e-01 , 1.000000e-01 ,
   9.156863e-01 , 9.156863e-01 , 8.431373e-02 ,
   9.313725e-01 , 9.313725e-01 , 6.862745e-02 ,
   9.470588e-01 , 9.470588e-01 , 5.294118e-02 ,
   9.627451e-01 , 9.627451e-01 , 3.725490e-02 ,
   9.784314e-01 , 9.784314e-01 , 2.156863e-02 ,
   9.941176e-01 , 9.941176e-01 , 5.882353e-03 ,
   9.960938e-01 , 9.901961e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.745098e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.588235e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.431373e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.274510e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.117647e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.960784e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.803922e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.647059e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.490196e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.333333e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.176471e-01 , 0.000000e+00 ,
   9.960938e-01 , 8.019608e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.862745e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.705882e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.549020e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.392157e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.235294e-01 , 0.000000e+00 ,
   9.960938e-01 , 7.078431e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.921569e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.764706e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.607843e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.450980e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.294118e-01 , 0.000000e+00 ,
   9.960938e-01 , 6.137255e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.980392e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.823529e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.666667e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.509804e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.352941e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.196078e-01 , 0.000000e+00 ,
   9.960938e-01 , 5.039216e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.882353e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.725490e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.568627e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.411765e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.254902e-01 , 0.000000e+00 ,
   9.960938e-01 , 4.098039e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.941176e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.784314e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.627451e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.470588e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.313725e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.156863e-01 , 0.000000e+00 ,
   9.960938e-01 , 3.000000e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.843137e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.686275e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.529412e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.372549e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.215686e-01 , 0.000000e+00 ,
   9.960938e-01 , 2.058824e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.901961e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.745098e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.588235e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.431373e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.274510e-01 , 0.000000e+00 ,
   9.960938e-01 , 1.117647e-01 , 0.000000e+00 ,
   9.960938e-01 , 9.607843e-02 , 0.000000e+00 ,
   9.960938e-01 , 8.039216e-02 , 0.000000e+00 ,
   9.960938e-01 , 6.470588e-02 , 0.000000e+00 ,
   9.960938e-01 , 4.901961e-02 , 0.000000e+00 ,
   9.960938e-01 , 3.333333e-02 , 0.000000e+00 ,
   9.960938e-01 , 1.764706e-02 , 0.000000e+00 ,
   9.960938e-01 , 1.960784e-03 , 0.000000e+00 ,
   9.862745e-01 , 0.000000e+00 , 0.000000e+00 ,
   9.705882e-01 , 0.000000e+00 , 0.000000e+00 ,
   9.549020e-01 , 0.000000e+00 , 0.000000e+00 ,
   9.392157e-01 , 0.000000e+00 , 0.000000e+00 ,
   9.235294e-01 , 0.000000e+00 , 0.000000e+00 ,
   9.078431e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.921569e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.764706e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.607843e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.450980e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.294118e-01 , 0.000000e+00 , 0.000000e+00 ,
   8.137255e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.980392e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.823529e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.666667e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.509804e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.352941e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.196078e-01 , 0.000000e+00 , 0.000000e+00 ,
   7.039216e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.882353e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.725490e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.568627e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.411765e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.254902e-01 , 0.000000e+00 , 0.000000e+00 ,
   6.098039e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.941176e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.784314e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.627451e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.470588e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.313725e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.156863e-01 , 0.000000e+00 , 0.000000e+00 ,
   5.000000e-01 , 0.000000e+00 , 0.000000e+00 
}:reshape{256,3}


local Nx = 10
local Ny = 24

visual.open_window()

local x = lunum.zeros{Nx,Ny}
local y = lunum.zeros{Nx,Ny}

for i,j in x:indices() do
   x[{i,j}] = 0.08 * i * math.pi
end
for i,j in y:indices() do
   y[{i,j}] = 0.04 * j * math.pi
end


for iter=0,1000 do

   local A = lunum.sin(x+math.cos(0.1*iter)) + lunum.cos(y-math.sin(0.1*iter))
   print(iter)
   collectgarbage()
   visual.draw_texture(A, cmap)

end
